# Development Setup

Welcome to TimeTiles development! This guide covers contributor-specific setup and workflows.

## Prerequisites

See [Installation Guide](/admin-guide/installation) for system requirements. Additionally, developers need:

- **Git LFS**: For managing image assets in the assets package

## Quick Start

1. Follow the [Quick Start Guide](/quick-start) for basic setup

2. **Setup Git LFS** (developer-specific):

   ```bash
   # Install Git LFS if not already installed
   git lfs install

   # Pull image assets
   git lfs pull
   ```

3. **Configure development environment**:

   ```bash
   # Copy environment configuration
   cp apps/web/.env.example apps/web/.env.local

   # Start development servers
   make dev
   ```

The application will be available at:

- **Main App**: http://localhost:3000
- **Documentation**: http://localhost:3001

## Essential Commands

### Development

```bash
make dev          # Start all apps with database
make check-ai     # Run lint and typecheck (ALWAYS run after changes)
make test-ai      # Run all tests (AI-friendly output)
```

### Testing

```bash
make test                           # Run all tests
make test-ai                        # Run tests with AI-friendly output
cd apps/web && pnpm test:debug      # Debug tests with logs
cd apps/web && pnpm test:e2e        # End-to-end tests
```

### Database

```bash
cd apps/web && pnpm payload:migrate:create  # Create new migration
cd apps/web && pnpm payload:migrate         # Run migrations
make db-reset                               # Reset database
```

## Development Workflow

### Making Changes

1. Create a feature branch: `git checkout -b feature/your-feature`
2. Make your changes following the existing code patterns
3. **ALWAYS run**: `make check-ai` (runs lint and typecheck)
4. Write tests for new functionality
5. Update documentation if needed

### Code Standards

- Use **pino logger**, never `console.log`
- Follow existing import patterns and path aliases
- Handle errors explicitly with proper logging
- Use React Query for server state management
- Follow TypeScript best practices

### Commit Guidelines

We use [Conventional Commits](./commit-guidelines) for consistent commit messages:

```bash
feat(web): add new timeline component
fix(api): resolve import validation error
docs(readme): update installation instructions
```

## Architecture Overview

TimeTiles uses a modern, performant tech stack:

- **Frontend**: Next.js 15 with Turbopack, React 19
- **CMS**: Payload CMS 3 for content management
- **Database**: PostgreSQL 17 + PostGIS 3.5 for geospatial data
- **State Management**: React Query + Zustand + nuqs
- **Styling**: Tailwind CSS with shadcn/ui components

For detailed architecture information, see the [Architecture Documentation](../architecture).

## Testing Strategy

We maintain three levels of testing:

1. **Unit Tests**: Fast, isolated component and utility tests
2. **Integration Tests**: API endpoint tests with test database
3. **E2E Tests**: Full user workflow tests with Playwright

See [Testing Guidelines](./testing-guidelines) for detailed information.

## Common Issues & Solutions

### Port Already in Use

```bash
lsof -ti:3000 | xargs kill -9
```

### Database Connection Issues

```bash
make down && make up
```

### Clean Reset

```bash
make clean && make up
```

## Next Steps

- **Architecture Deep Dive**: [Architecture & Tech Stack](../architecture)
- **API Development**: [REST API](../rest-api)
- **Deployment**: [Deployment Guides](/admin-guide/deployment)
- **Contributing**: Check the project README for contribution guidelines

## Need Help?

- **Issues**: Report bugs on GitHub Issues
- **Discussions**: Join community discussions
- **Code Review**: All PRs require review before merging
